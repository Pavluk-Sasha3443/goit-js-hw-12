{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios, { Axios } from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '46935717-685ea9342bebfa50d29cf3184';\n\nexport default async function fetchData(query, page, perPage) {\n  const { data } = await axios.get(`${BASE_URL}`, {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page,\n      per_page: perPage,\n    },\n  });\n  return data;\n}\n","export default function createMarkup(images) {\n  return images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<div class=\"gallery\">\n        <a class=\"photo-link\" href=\"${largeImageURL}\">\n                <img class=\"photo\" src=\"${webformatURL}\" alt=\"${tags} width=\"360\">\n        </a>\n        <ul class=\"list-item\">\n           <li class=\"item-text\">\n                <h2 class=\"item-title\">Likes</h2>\n                <p class =\"item-text\">${likes}</p>\n           </li>\n          <li class=\"item-text\">\n                <h2 class=\"item-title\">Views</h2>\n                <p class =\"item-text\">${views}</p>\n          </li>\n         <li class=\"item-text\">\n                <h2 class=\"item-title\">Comments</h2>\n                <p class =\"item-text\">${comments}</p>\n         </li>\n         <li class=\"item-text\">\n                <h2 class=\"item-title\">Downloads</h2>\n                <p class =\"item-text\">${downloads}</p>\n         </li>\n     </ul>\n     </div>\n        `;\n      }\n    )\n    .join('');\n}\n","import fetchData from './js/pixabay-api';\nimport createMarkup from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst form = document.querySelector('.form-search');\nconst gallery = document.querySelector('.js-gallery');\nconst loader = document.querySelector('.loader');\nconst loadMore = document.querySelector('.btn-load-more');\n\nform.addEventListener('submit', querySearch);\nloadMore.addEventListener('click', () =>\n  onLoadMore(form.elements.query.value.trim())\n);\n\nlet lightbox;\nlet page = 1;\nconst perPage = 15;\n\nasync function querySearch(event) {\n  event.preventDefault();\n  page = 1;\n  loader.style.display = 'block';\n  gallery.innerHTML = '';\n  const query = event.target.elements.query.value.trim();\n  loadMore.classList.add('visually-hidden');\n\n  if (query === '') {\n    iziToast.show({\n      title: 'Error',\n      message:\n        'Sorry, you need to enter data for the request. Please try again!',\n      position: 'topRight',\n      color: 'red',\n    });\n    loader.style.display = 'none';\n    return;\n  }\n\n  await fetchData(query, page, perPage)\n    .then(({ hits }) => {\n      if (hits.length === 0) {\n        iziToast.show({\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          position: 'topRight',\n          color: 'red',\n        });\n\n        loader.style.display = 'none';\n        return;\n      }\n\n      gallery.insertAdjacentHTML('beforeend', createMarkup(hits));\n      loader.style.display = 'none';\n      loadMore.classList.remove('visually-hidden');\n\n      if (hits.length < perPage) {\n        loadMore.classList.add('visually-hidden');\n      } else {\n        loadMore.classList.remove('visually-hidden');\n      }\n\n      if (lightbox) {\n        lightbox.refresh();\n      } else {\n        lightbox = new SimpleLightbox('.gallery a');\n      }\n    })\n    .catch(error => {\n      console.log(error);\n\n      iziToast.show({\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n        color: 'red',\n      });\n    });\n}\n\nasync function onLoadMore(query) {\n  page++;\n  loadMore.classList.add('visually-hidden');\n  loader.style.display = 'block';\n\n  try {\n    const { hits, totalHits } = await fetchData(query, page, perPage);\n    gallery.insertAdjacentHTML('beforeend', createMarkup(hits));\n\n    if (lightbox) {\n      lightbox.destroy();\n    }\n    lightbox = new SimpleLightbox('.gallery a');\n\n    loadMore.classList.remove('visually-hidden');\n\n    if (page * perPage >= totalHits) {\n      loadMore.classList.add('visually-hidden');\n      iziToast.show({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n        color: 'blue',\n      });\n    }\n    const card = document.querySelector('.gallery');\n    const cardHeight = card.getBoundingClientRect().height;\n\n    window.scrollBy({\n      left: 0,\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  } catch (error) {\n    console.log(error);\n  } finally {\n    loader.style.display = 'none';\n  }\n}\n"],"names":["BASE_URL","API_KEY","fetchData","query","page","perPage","data","axios","createMarkup","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","gallery","loader","loadMore","querySearch","onLoadMore","lightbox","event","iziToast","hits","SimpleLightbox","error","totalHits","cardHeight"],"mappings":"owBAEA,MAAMA,EAAW,2BACXC,EAAU,qCAED,eAAeC,EAAUC,EAAOC,EAAMC,EAAS,CAC5D,KAAM,CAAE,KAAAC,CAAI,EAAK,MAAMC,EAAM,IAAI,GAAGP,CAAQ,GAAI,CAC9C,OAAQ,CACN,IAAKC,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAUC,CACX,CACL,CAAG,EACD,OAAOC,CACT,CClBe,SAASE,EAAaC,EAAQ,CAC3C,OAAOA,EACJ,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IACe;AAAA,sCACuBL,CAAa;AAAA,0CACTD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA,wCAK5BC,CAAK;AAAA;AAAA;AAAA;AAAA,wCAILC,CAAK;AAAA;AAAA;AAAA;AAAA,wCAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,wCAIRC,CAAS;AAAA;AAAA;AAAA;AAAA,SAM5C,EACA,KAAK,EAAE,CACZ,CChCA,MAAMC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAU,SAAS,cAAc,aAAa,EAC9CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAW,SAAS,cAAc,gBAAgB,EAExDH,EAAK,iBAAiB,SAAUI,CAAW,EAC3CD,EAAS,iBAAiB,QAAS,IACjCE,EAAWL,EAAK,SAAS,MAAM,MAAM,KAAI,CAAE,CAC7C,EAEA,IAAIM,EACAnB,EAAO,EACX,MAAMC,EAAU,GAEhB,eAAegB,EAAYG,EAAO,CAChCA,EAAM,eAAc,EACpBpB,EAAO,EACPe,EAAO,MAAM,QAAU,QACvBD,EAAQ,UAAY,GACpB,MAAMf,EAAQqB,EAAM,OAAO,SAAS,MAAM,MAAM,OAGhD,GAFAJ,EAAS,UAAU,IAAI,iBAAiB,EAEpCjB,IAAU,GAAI,CAChBsB,EAAS,KAAK,CACZ,MAAO,QACP,QACE,mEACF,SAAU,WACV,MAAO,KACb,CAAK,EACDN,EAAO,MAAM,QAAU,OACvB,MACD,CAED,MAAMjB,EAAUC,EAAOC,EAAMC,CAAO,EACjC,KAAK,CAAC,CAAE,KAAAqB,KAAW,CAClB,GAAIA,EAAK,SAAW,EAAG,CACrBD,EAAS,KAAK,CACZ,QACE,2EACF,SAAU,WACV,MAAO,KACjB,CAAS,EAEDN,EAAO,MAAM,QAAU,OACvB,MACD,CAEDD,EAAQ,mBAAmB,YAAaV,EAAakB,CAAI,CAAC,EAC1DP,EAAO,MAAM,QAAU,OACvBC,EAAS,UAAU,OAAO,iBAAiB,EAEvCM,EAAK,OAASrB,EAChBe,EAAS,UAAU,IAAI,iBAAiB,EAExCA,EAAS,UAAU,OAAO,iBAAiB,EAGzCG,EACFA,EAAS,QAAO,EAEhBA,EAAW,IAAII,EAAe,YAAY,CAElD,CAAK,EACA,MAAMC,GAAS,CACd,QAAQ,IAAIA,CAAK,EAEjBH,EAAS,KAAK,CACZ,MAAO,QACP,QACE,2EACF,SAAU,WACV,MAAO,KACf,CAAO,CACP,CAAK,CACL,CAEA,eAAeH,EAAWnB,EAAO,CAC/BC,IACAgB,EAAS,UAAU,IAAI,iBAAiB,EACxCD,EAAO,MAAM,QAAU,QAEvB,GAAI,CACF,KAAM,CAAE,KAAAO,EAAM,UAAAG,GAAc,MAAM3B,EAAUC,EAAOC,EAAMC,CAAO,EAChEa,EAAQ,mBAAmB,YAAaV,EAAakB,CAAI,CAAC,EAEtDH,GACFA,EAAS,QAAO,EAElBA,EAAW,IAAII,EAAe,YAAY,EAE1CP,EAAS,UAAU,OAAO,iBAAiB,EAEvChB,EAAOC,GAAWwB,IACpBT,EAAS,UAAU,IAAI,iBAAiB,EACxCK,EAAS,KAAK,CACZ,QAAS,6DACT,SAAU,WACV,MAAO,MACf,CAAO,GAGH,MAAMK,EADO,SAAS,cAAc,UAAU,EACtB,sBAAqB,EAAG,OAEhD,OAAO,SAAS,CACd,KAAM,EACN,IAAKA,EAAa,EAClB,SAAU,QAChB,CAAK,CACF,OAAQF,EAAO,CACd,QAAQ,IAAIA,CAAK,CACrB,QAAY,CACRT,EAAO,MAAM,QAAU,MACxB,CACH"}